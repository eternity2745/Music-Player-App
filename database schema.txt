CREATE DATABASE musicplayer;

USE musicplayer;

CREATE TABLE users (
id BIGINT(20) UNIQUE,
username VARCHAR(255) NOT NULL PRIMARY KEY,
email VARCHAR(255) NOT NULL,
password VARCHAR(255) NOT NULL,
phone VARCHAR(15) NOT NULL
);

CREATE TABLE songs (
id INT(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
title VARCHAR(255) NOT NULL,
author VARCHAR(255) NOT NULL,
image VARCHAR(255) NOT NULL,
mp3 VARCHAR(255) NOT NULL,
language VARCHAR(255) NOT NULL,
genre VARCHAR(255) NOT NULL
);

CREATE TABLE playlists (
id INT(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
name VARCHAR(255) NOT NULL,
image VARCHAR(255) NOT NULL,
user VARCHAR(255) NOT NULL,
created VARCHAR(255) NOT NULL,
FOREIGN KEY (user) REFERENCES users(username)
);

CREATE TABLE playlist_songs(
playlist_id INT(11) NOT NULL,
song_id INT(11) NOT NULL,
song_name VARCHAR(255) NOT NULL,
created DATE,
FOREIGN KEY (playlist_id) REFERENCES playlists(id),
FOREIGN KEY (song_id) REFERENCES songs(id)
);

CREATE TABLE listening_history(
song_id INT(11) NOT NULL,
username VARCHAR(255) NOT NULL,
author VARCHAR(255) NOT NULL,
language VARCHAR(255) NOT NULL,
genre VARCHAR(255) NOT NULL,
FOREIGN KEY (song_id) REFERENCES songs(id),
FOREIGN KEY (username) REFERENCES users(username)
);